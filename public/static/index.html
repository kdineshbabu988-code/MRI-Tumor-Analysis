<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Tumor Detection System | AI Diagnostics</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="static/css/style.css">
</head>

<body>

    <!-- Header -->
    <header>
        <div class="logo-container">
            <i class="fas fa-brain logo-icon"></i>
            <div>
                <h1>NeuroScan AI</h1>
                <small>Advanced Brain Tumor Classification</small>
            </div>
        </div>
        <div>
            <span class="badge" style="background:rgba(255,255,255,0.2); padding:5px 10px; border-radius:5px;">
                <i class="fas fa-shield-alt"></i> ISO 27001 Secure
            </span>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">

        <!-- Left Column: Patient Info & Upload -->
        <div class="card">
            <h2><i class="fas fa-user-injured"></i> Patient Details</h2>
            <form id="patientForm">
                <div class="form-group">
                    <label for="pName">Patient Name</label>
                    <input type="text" id="pName" placeholder="Enter Full Name" required>
                </div>
                <div style="display: flex; gap: 10px;">
                    <div class="form-group" style="flex:1;">
                        <label for="pAge">Age</label>
                        <input type="number" id="pAge" placeholder="Age" required>
                    </div>
                    <div class="form-group" style="flex:1;">
                        <label for="pGender">Gender</label>
                        <select id="pGender">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="pDate">Scan Date</label>
                    <input type="date" id="pDate">
                </div>
            </form>

            <h2><i class="fas fa-microscope"></i> Image Analysis</h2>
            <p style="margin-bottom:1rem; color:#666;">Upload an MRI or CT scan (JPG, PNG) to detect anomalies.</p>

            <div id="uploadArea" class="upload-area">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <p>Drag & Drop MRI Image Here</p>
                <p style="font-size:0.8rem; color:#999;">or click to browse</p>
                <input type="file" id="fileInput" accept="image/*" style="display: none;">
            </div>

            <div id="imagePreviewContainer">
                <p style="font-weight:600; margin-bottom:0.5rem;">Preview:</p>
                <img id="imagePreview" src="" alt="Scan Preview">
            </div>

            <div id="errorMessage" class="error-message"></div>

            <button id="analyzeBtn" class="btn-primary" type="button" disabled style="margin-top: 1.5rem;">
                <i class="fas fa-search-plus"></i> Analyze Scan
            </button>
        </div>

        <!-- Right Column: Results -->
        <div class="card" id="resultsCard" style="position: relative; min-height: 400px;">

            <!-- Scanning Animation Overlay (Hidden by default) -->
            <div id="scanningOverlay" class="scanning-overlay">
                <div class="spinner"></div>
                <div class="scanner-bar"></div>
                <h2>Analyzing Neural Patterns...</h2>
                <p>Please wait while AI processes the scan.</p>
            </div>

            <!-- Initial State -->
            <div id="initialState" style="text-align: center; color:#999; margin-top:5rem;">
                <i class="fas fa-chart-line" style="font-size: 4rem; color:#ddd; margin-bottom:1rem;"></i>
                <p>Results will appear here after analysis.</p>
            </div>

            <!-- Results Section (Hidden initially) -->
            <div id="resultsSection" class="results-container" style="display: none;">
                <h2><i class="fas fa-clipboard-check"></i> Analysis Report</h2>

                <div class="confidence-meter">
                    <svg width="150" height="150">
                        <circle class="circle-bg" cx="75" cy="75" r="70"></circle>
                        <circle id="circleProgress" class="circle-progress" cx="75" cy="75" r="70"></circle>
                    </svg>
                    <div class="percentage-text" id="resConfidence">0%</div>
                </div>

                <p style="color:#666;">Confidence Score</p>
                <p></p>

                <div id="resResultBox" style="margin-top:2rem;">
                    <h3 id="resStatus" class="result-status"></h3>
                    <p>Classification: <strong id="resClass" style="font-size:1.2rem;"></strong></p>
                </div>

                <div style="margin-top: 2rem; width:100%;">
                    <button id="downloadReportBtn" class="btn-secondary" style="width:100%;">
                        <i class="fas fa-file-pdf"></i> Download Medical Report
                    </button>
                    <button onclick="window.location.reload()" class="btn-secondary"
                        style="width:100%; background-color:#f8f9fa; color:#333; margin-top:0.5rem; border:1px solid #ddd;">
                        <i class="fas fa-redo"></i> New Analysis
                    </button>
                </div>
            </div>

        </div>

    </div>

    <footer>
        <p>&copy; 2024 NeuroScan AI. IEEE Standard Medical Imaging System.</p>
        <p style="font-size:0.7rem; margin-top:0.5rem;">Disclaimer: This AI system is for assistive diagnostic purposes
            only. All results must be verified by a certified radiologist.</p>
    </footer>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="static/js/script.js"></script>

    <script>
        // Set today's date
        document.getElementById('pDate').valueAsDate = new Date();
    </script>

</body>

</html>